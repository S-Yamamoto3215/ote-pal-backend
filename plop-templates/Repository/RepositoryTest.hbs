import { DataSource } from "typeorm";

import { {{ pascalCase name }}Repository } from "@/domain/repositories/{{ pascalCase name }}Repository/{{ pascalCase name }}Repository";
import { AppError } from "@/infrastructure/errors/AppError";

import { createTestDatabase, closeTestDataSource } from "@tests/utils/database/setupTestDatabase";
import { seedDatabase } from "@tests/utils/database/seedDatabase";

describe("{{ pascalCase name }}Repository", () => {
  let dataSource: DataSource;
  let {{ camelCase name }}Repository: {{ pascalCase name }}Repository;

  beforeAll(async () => {
    dataSource = await createTestDatabase();
    await seedDatabase(dataSource);
    {{ camelCase name }}Repository = new {{ pascalCase name }}Repository(dataSource);
  });

  afterAll(async () => {
    await closeTestDataSource();
  });

  // e.x) save method
  // describe("save", () => {
  //   it("should save a {{ camelCase name }} successfully", async () => {
  //     const result = await {{ camelCase name }}Repository.save(parent{{ pascalCase name }});
  //
  //     expect(result).toBe(parent{{ pascalCase name }});
  //     expect(result.id).toBeDefined();
  //   });
  // });

});
