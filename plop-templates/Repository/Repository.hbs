import { Repository, DataSource } from "typeorm";

import { {{ pascalCase name }} } from "@/domain/entities/{{ pascalCase name }}";
import { I{{ pascalCase name }}Repository } from "@/domain/repositories/{{ pascalCase name }}Repository";
import { AppError } from "@/infrastructure/errors/AppError";

export class {{ pascalCase name }}Repository implements I{{ pascalCase name }}Repository {
  private repo: Repository<{{ pascalCase name }}>;

  constructor(dataSource: DataSource) {
    this.repo = dataSource.getRepository({{ pascalCase name }});
  }

  // Implement the methods from IRepository here. e.x) save method
  // async save({{ camelCase name }}: {{ pascalCase name }}): Promise<{{ pascalCase name }}> {
  //   try {
  //     {{ camelCase name }}.validate();
  //     return this.repo.save({{ camelCase name }});
  //   } catch (error) {
  //     throw new AppError("DatabaseError", "Failed to save {{ camelCase name }}");
  //   }
  // }
}
